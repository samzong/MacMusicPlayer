<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Song Picker Window Enhancement Proposal MacMusicPlayer</title>
    <meta name="description" content="Provide a minimal search-and-play surface so users can jump to a specific track without fighting the full library. The p">
    <meta name="keywords" content="macOS, music player, menu bar, SwiftUI, seamless,macOS Integration, exceptional, user experience, Minimalist Design,Audio Player">
    <link rel="stylesheet" type="text/css" href="../css/main.css?v=1.34.2">
    <link rel="stylesheet" type="text/css" href="../css/tocbot.css?v=1.34.2">
    <link rel="stylesheet" type="text/css" href="../css/media.css?v=1.34.2">
    <link rel="stylesheet" type="text/css" href="../css/sidebar.css?v=1.34.2">
    <link rel="stylesheet" type="text/css" href="../css/copy.css?v=1.34.2">
    <link rel="stylesheet" type="text/css" href="../css/demo-preview.css?v=1.34.2">
    <script src="../js/copy.js?v=1.34.2"></script>
    <script src="../js/dark-mode.js?v=1.34.2"></script>
    <script src="../js/markdown-style.js?v=1.34.2"></script>
  </head>
  <body id="idoctotop"><a href="#idoctotop" class="gototop">top</a>
    <header class="header">
      <article class="inner warpper" style="max-width:720px;"><a class="logo" href="../index.html"><span class="title">MacMusicPlayer</span></a>
        <div class="content">
          <ul class="menu">
            <li><a href="../index.html" target="" class="">Home</a></li>
            <li><a href="https://github.com/samzong" target="__blank" class="">About</a></li>
          </ul><a href="https://github.com/samzong/MacMusicPlayer" target="_blank" rel="noopener noreferrer" title="Github" name="Github" class="github"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
            </svg></a>
          <dark-mode permanent=""></dark-mode>
        </div>
      </article>
    </header>
    <div style="max-width:720px;" class="warpper-content warpper notocs">
      <markdown-style theme-auto-switch-disabled="">
        <h1 id="song-picker-window-enhancement-proposal"><a aria-hidden="true" tabindex="-1" href="#song-picker-window-enhancement-proposal" class="anchor"><span class="icon icon-link"></span></a>Song Picker Window Enhancement Proposal</h1>
        <h2 id="summary"><a aria-hidden="true" tabindex="-1" href="#summary" class="anchor"><span class="icon icon-link"></span></a>Summary</h2>
        <p>Provide a minimal search-and-play surface so users can jump to a specific track without fighting the full library. The picker is a floating <code>NSPanel</code> invoked from the status-bar menu and relies on filenames only.</p>
        <h2 id="motivation"><a aria-hidden="true" tabindex="-1" href="#motivation" class="anchor"><span class="icon icon-link"></span></a>Motivation</h2>
        <p>Users with large libraries asked for a way to play a known song instantly instead of cycling through sequential or random playback. The existing player offered no quick filtering or direct play control once a track was buried in the list.</p>
        <h2 id="goals"><a aria-hidden="true" tabindex="-1" href="#goals" class="anchor"><span class="icon icon-link"></span></a>Goals</h2>
        <ul>
          <li>Deliver an always-on-top panel that opens fast and stays lightweight.</li>
          <li>Allow immediate filtering by typing, with sane keyboard shortcuts for playback.</li>
          <li>Reuse the current <code>PlayerManager.playlist</code> without building new data plumbing.</li>
        </ul>
        <h2 id="non-goals"><a aria-hidden="true" tabindex="-1" href="#non-goals" class="anchor"><span class="icon icon-link"></span></a>Non-Goals</h2>
        <ul>
          <li>No playlist management, metadata browsing, or persistent filters.</li>
          <li>No fuzzy search, multi-column table, artwork, or other cosmetic extras.</li>
          <li>No system-wide hotkeys beyond the existing menu item + <code>⌘F</code> accelerator.</li>
        </ul>
        <h2 id="proposal"><a aria-hidden="true" tabindex="-1" href="#proposal" class="anchor"><span class="icon icon-link"></span></a>Proposal</h2>
        <p>Implement <code>SimpleSongPickerWindow</code> as an <code>NSPanel</code> created from the <em>Browse Songs…</em> menu action.</p>
        <h3 id="activation-flow"><a aria-hidden="true" tabindex="-1" href="#activation-flow" class="anchor"><span class="icon icon-link"></span></a>Activation Flow</h3>
        <ol>
          <li>User clicks <strong>Browse Songs…</strong> or presses <code>⌘F</code>.</li>
          <li>If a picker already exists, bring it forward; otherwise, spawn one and center it.</li>
          <li>Focus the search box so typing starts filtering immediately.</li>
        </ol>
        <h3 id="layout"><a aria-hidden="true" tabindex="-1" href="#layout" class="anchor"><span class="icon icon-link"></span></a>Layout</h3>
        <ul>
          <li>Fixed 600×400 panel, borderless, floating level, with a plain control-colored background view.</li>
          <li>Contents: search field, table view, bottom status label.</li>
          <li>Currently playing track renders in accent color with semibold font.</li>
        </ul>
        <h3 id="filtering-behavior"><a aria-hidden="true" tabindex="-1" href="#filtering-behavior" class="anchor"><span class="icon icon-link"></span></a>Filtering Behavior</h3>
        <ul>
          <li>We snapshot <code>PlayerManager.playlist</code> into <code>allTracks</code> and maintain a filtered copy.</li>
          <li>A 150 ms debounce keeps filtering off every keystroke; matches use case-insensitive substring on the filename (extension stripped).</li>
          <li>Empty query shows all tracks. Empty result keeps focus in the field and surfaces “No results found”.</li>
        </ul>
        <h3 id="playback--shortcuts"><a aria-hidden="true" tabindex="-1" href="#playback--shortcuts" class="anchor"><span class="icon icon-link"></span></a>Playback &#x26; Shortcuts</h3>
        <ul>
          <li><code>Return</code>/<code>Enter</code>: play highlighted row without closing the window.</li>
          <li>Double-click mirrors the return behavior.</li>
          <li><code>Space</code>: toggles play/pause when the current track is selected; otherwise, plays the highlighted track and repaints the table while preserving selection.</li>
          <li><code>Esc</code>: closes the panel even if the search field is first responder (handled through the delegate callback).</li>
          <li>Typing alphanumerics while the table has focus hands control back to the search field so filtering never pauses.</li>
        </ul>
        <h3 id="localization--status-copy"><a aria-hidden="true" tabindex="-1" href="#localization--status-copy" class="anchor"><span class="icon icon-link"></span></a>Localization &#x26; Status Copy</h3>
        <ul>
          <li>Placeholder text, status messages, and operation hints use <code>NSLocalizedString</code> keys (<code>search_songs_placeholder</code>, <code>song_count_format</code>, <code>operation_hints</code>).</li>
          <li>Translations live in <code>Resources/Localization/*/Localizable.strings</code> alongside the rest of the app.</li>
        </ul>
        <h2 id="drawbacks"><a aria-hidden="true" tabindex="-1" href="#drawbacks" class="anchor"><span class="icon icon-link"></span></a>Drawbacks</h2>
        <ul>
          <li>Filename-only search ignores tags or metadata; users with poorly named files get limited benefit.</li>
          <li>Fixed geometry means long titles truncate; we accept this to keep the panel predictable.</li>
        </ul>
        <h2 id="alternatives-considered"><a aria-hidden="true" tabindex="-1" href="#alternatives-considered" class="anchor"><span class="icon icon-link"></span></a>Alternatives Considered</h2>
        <ul>
          <li>Rich playlist UI with multiple columns (rejected: heavy, drifts from menu-bar app vision).</li>
          <li>Spotlight-style overlay with fuzzy matching (rejected for complexity and power key conflicts).</li>
          <li>Global shortcut to summon the picker anywhere (rejected to avoid competing for system-level key bindings).</li>
        </ul>
        <h2 id="implementation-history"><a aria-hidden="true" tabindex="-1" href="#implementation-history" class="anchor"><span class="icon icon-link"></span></a>Implementation History</h2>
        <ul>
          <li>Initial implementation shipped in <code>SimpleSongPickerWindow.swift</code>.</li>
          <li>Debounce, selection restore, and localized strings landed in the same file with supporting entries in localization bundles.</li>
        </ul>
      </markdown-style>
    </div>
    <script src="../js/demo-preview.js?v=1.34.2"></script>
    <div class="footer warpper" style="max-width:720px;">Copyright © 2025 <a href="https://github.com/samzong" target="_blank">samzong</a><br>
      <script>
  function downloadLatest() {
    const platform = navigator.platform.toLowerCase();
    const userAgent = navigator.userAgent.toLowerCase();
    
    let downloadUrl = '';
    
    if (platform.includes('mac')) {
      // macOS
      if (userAgent.includes('arm') || userAgent.includes('apple')) {
        downloadUrl = 'https://github.com/samzong/MacMusicPlayer/releases/latest/download/MacMusicPlayer-arm64.dmg';
      } else {
        downloadUrl = 'https://github.com/samzong/MacMusicPlayer/releases/latest/download/MacMusicPlayer-x86_64.dmg';
      }
    } else {
      // other
      window.open('https://github.com/samzong/MacMusicPlayer/releases/latest', '_blank');
      return;
    }
    window.location.href = downloadUrl;
  }
</script>
    </div>
    <script src="../js/tocbot.js?v=1.34.2"></script>
  </body>
</html>
