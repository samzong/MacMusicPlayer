<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MacMusicPlayer 开发者指南 MacMusicPlayer</title>
    <meta name="description" content="MacMusicPlayer 是一款为 macOS 设计的轻量级音乐播放器应用，提供简洁的界面和丰富的功能。应用以菜单栏工具形式存在，便于用户日常使用，同时提供音乐播放、下载和均衡器等功能。">
    <meta name="keywords" content="macOS, music player, menu bar, SwiftUI, seamless,macOS Integration, exceptional, user experience, Minimalist Design,Audio Player">
    <link rel="stylesheet" type="text/css" href="css/main.css?v=1.34.1">
    <link rel="stylesheet" type="text/css" href="css/tocbot.css?v=1.34.1">
    <link rel="stylesheet" type="text/css" href="css/media.css?v=1.34.1">
    <link rel="stylesheet" type="text/css" href="css/sidebar.css?v=1.34.1">
    <link rel="stylesheet" type="text/css" href="css/copy.css?v=1.34.1">
    <link rel="stylesheet" type="text/css" href="css/demo-preview.css?v=1.34.1">
    <link rel="icon" href="MacMusicPlayer/Assets.xcassets/AppIcon.appiconset/icon-removebg.png" type="image/x-icon">
    <script src="js/copy.js?v=1.34.1"></script>
    <script src="js/dark-mode.js?v=1.34.1"></script>
    <script src="js/markdown-style.js?v=1.34.1"></script>
  </head>
  <body id="idoctotop"><a href="#idoctotop" class="gototop">top</a>
    <header class="header">
      <article class="inner warpper" style="max-width:720px;"><a class="logo" href="index.html"><img alt="MacMusicPlayer logo" src="MacMusicPlayer/Assets.xcassets/AppIcon.appiconset/icon-removebg.png">
<span class="title">MacMusicPlayer</span></a>
        <div class="content">
          <ul class="menu">
            <li><a href="index.html" target="" class="">Home</a></li>
            <li><a href="https://github.com/samzong" target="__blank" class="">About</a></li>
          </ul><a href="https://github.com/samzong/MacMusicPlayer" target="_blank" rel="noopener noreferrer" title="Github" name="Github" class="github"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
            </svg></a>
          <dark-mode permanent=""></dark-mode>
        </div>
      </article>
    </header>
    <div style="max-width:720px;" class="warpper-content warpper notocs">
      <markdown-style theme-auto-switch-disabled="">
        <h1 id="macmusicplayer-开发者指南"><a aria-hidden="true" tabindex="-1" href="#macmusicplayer-开发者指南" class="anchor"><span class="icon icon-link"></span></a>MacMusicPlayer 开发者指南</h1>
        <h2 id="项目概述"><a aria-hidden="true" tabindex="-1" href="#项目概述" class="anchor"><span class="icon icon-link"></span></a>项目概述</h2>
        <p>MacMusicPlayer 是一款为 macOS 设计的轻量级音乐播放器应用，提供简洁的界面和丰富的功能。应用以菜单栏工具形式存在，便于用户日常使用，同时提供音乐播放、下载和均衡器等功能。</p>
        <h2 id="架构设计"><a aria-hidden="true" tabindex="-1" href="#架构设计" class="anchor"><span class="icon icon-link"></span></a>架构设计</h2>
        <h3 id="项目结构"><a aria-hidden="true" tabindex="-1" href="#项目结构" class="anchor"><span class="icon icon-link"></span></a>项目结构</h3>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">MacMusicPlayer/
</span><span class="code-line line-number" line="2">├── AppDelegate.swift            # 应用入口和主要控制
</span><span class="code-line line-number" line="3">├── MacMusicPlayerApp.swift      # SwiftUI应用入口
</span><span class="code-line line-number" line="4">├── Info.plist                   # 应用配置信息
</span><span class="code-line line-number" line="5">├── Assets.xcassets/             # 应用图标和资源
</span><span class="code-line line-number" line="6">├── Controllers/                 # 控制器层
</span><span class="code-line line-number" line="7">│   └── DownloadViewController.swift  # 音乐下载控制器
</span><span class="code-line line-number" line="8">├── Managers/                    # 管理器层
</span><span class="code-line line-number" line="9">│   ├── DownloadManager.swift    # 下载管理
</span><span class="code-line line-number" line="10">│   ├── LaunchManager.swift      # 启动管理
</span><span class="code-line line-number" line="11">│   ├── PlayerManager.swift      # 播放控制管理
</span><span class="code-line line-number" line="12">│   └── SleepManager.swift       # 睡眠控制管理
</span><span class="code-line line-number" line="13">├── Models/                      # 数据模型层
</span><span class="code-line line-number" line="14">│   └── Track.swift              # 音轨模型
</span><span class="code-line line-number" line="15">├── Resources/                   # 资源文件
</span><span class="code-line line-number" line="16">│   └── Localization/            # 多语言支持
</span><span class="code-line line-number" line="17">│       ├── en.lproj/            # 英文
</span><span class="code-line line-number" line="18">│       ├── zh-Hans.lproj/       # 简体中文
</span><span class="code-line line-number" line="19">│       ├── zh-Hant.lproj/       # 繁体中文
</span><span class="code-line line-number" line="20">│       ├── ja.lproj/            # 日文
</span><span class="code-line line-number" line="21">│       └── ko.lproj/            # 韩文
</span><span class="code-line line-number" line="22">├── Utilities/                   # 工具类
</span><span class="code-line line-number" line="23">└── Views/                       # 视图层
</span><span class="code-line line-number" line="24">    ├── ContentView.swift        # 主内容视图
</span><span class="code-line line-number" line="25">    ├── ControlOverlay.swift     # 控制覆盖层
</span><span class="code-line line-number" line="26">    └── CustomTableRowView.swift # 自定义表格行视图
</span></code><input type="hidden" value="MacMusicPlayer/
├── AppDelegate.swift            # 应用入口和主要控制
├── MacMusicPlayerApp.swift      # SwiftUI应用入口
├── Info.plist                   # 应用配置信息
├── Assets.xcassets/             # 应用图标和资源
├── Controllers/                 # 控制器层
│   └── DownloadViewController.swift  # 音乐下载控制器
├── Managers/                    # 管理器层
│   ├── DownloadManager.swift    # 下载管理
│   ├── LaunchManager.swift      # 启动管理
│   ├── PlayerManager.swift      # 播放控制管理
│   └── SleepManager.swift       # 睡眠控制管理
├── Models/                      # 数据模型层
│   └── Track.swift              # 音轨模型
├── Resources/                   # 资源文件
│   └── Localization/            # 多语言支持
│       ├── en.lproj/            # 英文
│       ├── zh-Hans.lproj/       # 简体中文
│       ├── zh-Hant.lproj/       # 繁体中文
│       ├── ja.lproj/            # 日文
│       └── ko.lproj/            # 韩文
├── Utilities/                   # 工具类
└── Views/                       # 视图层
    ├── ContentView.swift        # 主内容视图
    ├── ControlOverlay.swift     # 控制覆盖层
    └── CustomTableRowView.swift # 自定义表格行视图
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="核心模块详解"><a aria-hidden="true" tabindex="-1" href="#核心模块详解" class="anchor"><span class="icon icon-link"></span></a>核心模块详解</h2>
        <h3 id="1-应用入口-appdelegateswift"><a aria-hidden="true" tabindex="-1" href="#1-应用入口-appdelegateswift" class="anchor"><span class="icon icon-link"></span></a>1. 应用入口 (AppDelegate.swift)</h3>
        <p>AppDelegate 负责应用的生命周期管理，包括：</p>
        <ul>
          <li>初始化各个 Manager</li>
          <li>创建和管理状态栏图标和菜单</li>
          <li>设置和配置媒体播放控制中心</li>
          <li>处理用户交互事件</li>
        </ul>
        <h3 id="2-播放管理-playermanagerswift"><a aria-hidden="true" tabindex="-1" href="#2-播放管理-playermanagerswift" class="anchor"><span class="icon icon-link"></span></a>2. 播放管理 (PlayerManager.swift)</h3>
        <p>PlayerManager 是应用的核心，负责音乐播放相关功能：</p>
        <ul>
          <li>播放列表管理</li>
          <li>音频播放控制（播放、暂停、上一首、下一首）</li>
          <li>播放模式控制（顺序播放、单曲循环、随机播放）</li>
          <li>音频均衡器控制</li>
          <li>音频效果处理</li>
        </ul>
        <pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 播放模式枚举</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">enum</span> <span class="token class-name">PlayMode</span><span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">    <span class="token keyword">case</span> sequential <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Sequential"</span></span>  <span class="token comment">// 顺序播放</span>
</span><span class="code-line line-number" line="4">    <span class="token keyword">case</span> singleLoop <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Single Loop"</span></span> <span class="token comment">// 单曲循环</span>
</span><span class="code-line line-number" line="5">    <span class="token keyword">case</span> random <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Random"</span></span>         <span class="token comment">// 随机播放</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8"><span class="token comment">// 均衡器预设</span>
</span><span class="code-line line-number" line="9"><span class="token keyword">enum</span> <span class="token class-name">EqualizerPreset</span><span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">CaseIterable</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="10">    <span class="token keyword">case</span> flat <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Flat"</span></span>
</span><span class="code-line line-number" line="11">    <span class="token keyword">case</span> classical <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Classical"</span></span>
</span><span class="code-line line-number" line="12">    <span class="token keyword">case</span> rock <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Rock"</span></span>
</span><span class="code-line line-number" line="13">    <span class="token keyword">case</span> pop <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Pop"</span></span>
</span><span class="code-line line-number" line="14">    <span class="token keyword">case</span> jazz <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Jazz"</span></span>
</span><span class="code-line line-number" line="15">    <span class="token keyword">case</span> electronic <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Electronic"</span></span>
</span><span class="code-line line-number" line="16">    <span class="token keyword">case</span> hiphop <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Hip-Hop"</span></span>
</span><span class="code-line line-number" line="17"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="// 播放模式枚举
enum PlayMode: String {
    case sequential = &#x22;Sequential&#x22;  // 顺序播放
    case singleLoop = &#x22;Single Loop&#x22; // 单曲循环
    case random = &#x22;Random&#x22;         // 随机播放
}

// 均衡器预设
enum EqualizerPreset: String, CaseIterable {
    case flat = &#x22;Flat&#x22;
    case classical = &#x22;Classical&#x22;
    case rock = &#x22;Rock&#x22;
    case pop = &#x22;Pop&#x22;
    case jazz = &#x22;Jazz&#x22;
    case electronic = &#x22;Electronic&#x22;
    case hiphop = &#x22;Hip-Hop&#x22;
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="3-下载功能-downloadmanagerswift--downloadviewcontrollerswift"><a aria-hidden="true" tabindex="-1" href="#3-下载功能-downloadmanagerswift--downloadviewcontrollerswift" class="anchor"><span class="icon icon-link"></span></a>3. 下载功能 (DownloadManager.swift &#x26; DownloadViewController.swift)</h3>
        <p>提供从网络下载音乐的功能：</p>
        <ul>
          <li>支持从 YouTube 等网站获取音频</li>
          <li>基于 yt-dlp 和 ffmpeg 工具</li>
          <li>支持多种音频格式和质量选择</li>
          <li>自动下载至音乐库</li>
        </ul>
        <h3 id="4-系统集成"><a aria-hidden="true" tabindex="-1" href="#4-系统集成" class="anchor"><span class="icon icon-link"></span></a>4. 系统集成</h3>
        <h4 id="睡眠管理-sleepmanagerswift"><a aria-hidden="true" tabindex="-1" href="#睡眠管理-sleepmanagerswift" class="anchor"><span class="icon icon-link"></span></a>睡眠管理 (SleepManager.swift)</h4>
        <ul>
          <li>控制系统睡眠行为</li>
          <li>播放时可阻止系统睡眠</li>
        </ul>
        <h4 id="启动管理-launchmanagerswift"><a aria-hidden="true" tabindex="-1" href="#启动管理-launchmanagerswift" class="anchor"><span class="icon icon-link"></span></a>启动管理 (LaunchManager.swift)</h4>
        <ul>
          <li>控制应用登录启动</li>
          <li>支持 macOS 13 以上和旧版系统</li>
        </ul>
        <h3 id="5-用户界面"><a aria-hidden="true" tabindex="-1" href="#5-用户界面" class="anchor"><span class="icon icon-link"></span></a>5. 用户界面</h3>
        <ul>
          <li>基于 SwiftUI 和 AppKit 混合架构</li>
          <li>状态栏图标界面</li>
          <li>下载窗口界面</li>
          <li>主内容视图</li>
        </ul>
        <h2 id="数据模型"><a aria-hidden="true" tabindex="-1" href="#数据模型" class="anchor"><span class="icon icon-link"></span></a>数据模型</h2>
        <h3 id="track-模型"><a aria-hidden="true" tabindex="-1" href="#track-模型" class="anchor"><span class="icon icon-link"></span></a>Track 模型</h3>
        <pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">struct</span> <span class="token class-name">Track</span><span class="token punctuation">:</span> <span class="token class-name">Identifiable</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">let</span> id<span class="token punctuation">:</span> <span class="token constant">UUID</span>
</span><span class="code-line line-number" line="3">    <span class="token keyword">let</span> title<span class="token punctuation">:</span> <span class="token class-name">String</span>
</span><span class="code-line line-number" line="4">    <span class="token keyword">let</span> artist<span class="token punctuation">:</span> <span class="token class-name">String</span>
</span><span class="code-line line-number" line="5">    <span class="token keyword">let</span> url<span class="token punctuation">:</span> <span class="token constant">URL</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="struct Track: Identifiable {
    let id: UUID
    let title: String
    let artist: String
    let url: URL
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="功能亮点"><a aria-hidden="true" tabindex="-1" href="#功能亮点" class="anchor"><span class="icon icon-link"></span></a>功能亮点</h2>
        <ol>
          <li><strong>状态栏集成</strong>：应用作为菜单栏工具运行，不占用 Dock 空间</li>
          <li><strong>音乐播放</strong>：支持常见音频格式，提供基础播放控制</li>
          <li><strong>播放模式</strong>：支持顺序播放、单曲循环、随机播放</li>
          <li><strong>均衡器</strong>：内置多种均衡器预设，支持低音、中音、高音调节</li>
          <li><strong>睡眠控制</strong>：可阻止系统在播放音乐时进入睡眠状态</li>
          <li><strong>多语言支持</strong>：支持英文、简体中文、繁体中文、日文和韩文</li>
          <li><strong>下载功能</strong>：集成音乐下载器，支持从各种网站下载音频</li>
        </ol>
        <h2 id="开发指南"><a aria-hidden="true" tabindex="-1" href="#开发指南" class="anchor"><span class="icon icon-link"></span></a>开发指南</h2>
        <h3 id="环境要求"><a aria-hidden="true" tabindex="-1" href="#环境要求" class="anchor"><span class="icon icon-link"></span></a>环境要求</h3>
        <ul>
          <li>macOS 10.15+</li>
          <li>Xcode 12.0+</li>
          <li>Swift 5.3+</li>
        </ul>
        <h3 id="构建项目"><a aria-hidden="true" tabindex="-1" href="#构建项目" class="anchor"><span class="icon icon-link"></span></a>构建项目</h3>
        <ol>
          <li>
            <p>克隆仓库</p>
            <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">git</span> clone https://github.com/yourusername/MacMusicPlayer.git
</span></code><input type="hidden" value="git clone https://github.com/yourusername/MacMusicPlayer.git
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
          <li>
            <p>打开项目</p>
            <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token builtin class-name">cd</span> MacMusicPlayer
</span><span class="code-line line-number" line="2"><span class="token function">open</span> MacMusicPlayer.xcodeproj
</span></code><input type="hidden" value="cd MacMusicPlayer
open MacMusicPlayer.xcodeproj
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
          <li>
            <p>构建和运行项目</p>
          </li>
        </ol>
        <h3 id="代码贡献指南"><a aria-hidden="true" tabindex="-1" href="#代码贡献指南" class="anchor"><span class="icon icon-link"></span></a>代码贡献指南</h3>
        <ol>
          <li>
            <p><strong>代码风格</strong></p>
            <ul>
              <li>遵循 Swift 标准代码风格</li>
              <li>使用 SwiftLint 保证代码质量</li>
            </ul>
          </li>
          <li>
            <p><strong>结构组织</strong></p>
            <ul>
              <li>遵循 MVVM 架构模式</li>
              <li>Manager 类负责具体功能逻辑</li>
              <li>视图与数据分离</li>
            </ul>
          </li>
          <li>
            <p><strong>本地化</strong></p>
            <ul>
              <li>所有用户可见字符串应使用 NSLocalizedString</li>
              <li>新增功能需添加对应的多语言支持</li>
            </ul>
          </li>
          <li>
            <p><strong>测试</strong></p>
            <ul>
              <li>添加单元测试确保功能正常</li>
              <li>进行 UI 测试验证界面流程</li>
            </ul>
          </li>
        </ol>
        <h2 id="依赖项"><a aria-hidden="true" tabindex="-1" href="#依赖项" class="anchor"><span class="icon icon-link"></span></a>依赖项</h2>
        <ul>
          <li>
            <p><strong>系统框架</strong>：</p>
            <ul>
              <li>AppKit</li>
              <li>AVFoundation</li>
              <li>MediaPlayer</li>
              <li>SwiftUI</li>
              <li>ServiceManagement</li>
              <li>IOKit</li>
            </ul>
          </li>
          <li>
            <p><strong>外部工具</strong>（用于下载功能）：</p>
            <ul>
              <li>yt-dlp</li>
              <li>ffmpeg</li>
            </ul>
          </li>
        </ul>
        <h2 id="常见问题"><a aria-hidden="true" tabindex="-1" href="#常见问题" class="anchor"><span class="icon icon-link"></span></a>常见问题</h2>
        <ol>
          <li>
            <p><strong>下载功能不可用</strong></p>
            <ul>
              <li>确保安装了 yt-dlp 和 ffmpeg</li>
              <li>可通过 Homebrew 安装: <code>brew install yt-dlp ffmpeg</code></li>
            </ul>
          </li>
          <li>
            <p><strong>音乐源设置</strong></p>
            <ul>
              <li>应用首次启动需要设置音乐源文件夹</li>
              <li>可通过菜单重新设置音乐源</li>
            </ul>
          </li>
          <li>
            <p><strong>均衡器设置</strong></p>
            <ul>
              <li>均衡器设置会被保存并在下次启动时应用</li>
            </ul>
          </li>
        </ol>
        <h2 id="进阶开发"><a aria-hidden="true" tabindex="-1" href="#进阶开发" class="anchor"><span class="icon icon-link"></span></a>进阶开发</h2>
        <h3 id="添加新功能"><a aria-hidden="true" tabindex="-1" href="#添加新功能" class="anchor"><span class="icon icon-link"></span></a>添加新功能</h3>
        <ol>
          <li>在适当的 Manager 中添加功能逻辑</li>
          <li>更新 UI 以支持新功能</li>
          <li>添加必要的本地化字符串</li>
          <li>确保新功能与现有代码无冲突</li>
        </ol>
        <h3 id="修改现有功能"><a aria-hidden="true" tabindex="-1" href="#修改现有功能" class="anchor"><span class="icon icon-link"></span></a>修改现有功能</h3>
        <ol>
          <li>充分理解现有代码结构和设计意图</li>
          <li>保持原有的架构模式</li>
          <li>尽量避免破坏性更改</li>
        </ol>
        <h2 id="版本历史"><a aria-hidden="true" tabindex="-1" href="#版本历史" class="anchor"><span class="icon icon-link"></span></a>版本历史</h2>
        <p>请参考项目 Git 提交历史查看详细更新记录。</p>
      </markdown-style>
    </div>
    <script src="js/demo-preview.js?v=1.34.1"></script>
    <div class="footer warpper" style="max-width:720px;">Copyright © 2025 <a href="https://github.com/samzong" target="_blank">samzong</a><br></div>
    <script src="js/tocbot.js?v=1.34.1"></script>
  </body>
</html>
